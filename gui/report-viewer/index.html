<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>LiveShark Report Viewer</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <header class="topbar">
      <div class="topbar-left">
        <button id="openBtn" type="button">Open report.json</button>
        <button id="reloadBtn" type="button" disabled>Reload</button>
        <input id="fileInput" type="file" accept=".json" hidden />
      </div>
      <div class="topbar-right" id="summary">
        <div class="summary-item">Report: <span id="summaryVersion">N/A</span></div>
        <div class="summary-item">Duration: <span id="summaryDuration">N/A</span></div>
        <div class="summary-item">Universes: <span id="summaryUniverses">0</span></div>
        <div class="summary-item">Flows: <span id="summaryFlows">0</span></div>
        <div class="summary-item">Conflicts: <span id="summaryConflicts">0</span></div>
        <div class="summary-item">Violations: <span id="summaryViolations">0</span></div>
      </div>
    </header>

    <main class="layout">
      <section class="dropzone" id="dropzone">
        <div class="dropzone-inner">
          <div class="dropzone-title">Drop report.json here</div>
          <div class="dropzone-sub">or use the Open button</div>
        </div>
      </section>

      <section class="panel">
        <div class="error-banner" id="errorBanner" hidden></div>
        
        <!-- Timeline visualization -->
        <div class="timeline-section" id="timelineSection" hidden>
          <div class="timeline-header">
            <h3>Timeline</h3>
            <div class="timeline-info">
              <span id="timelineStart">Start: N/A</span>
              <span id="timelineDuration">Duration: N/A</span>
              <span id="timelineEnd">End: N/A</span>
            </div>
          </div>
          <div class="timeline-container">
            <svg class="timeline-svg" id="timelineSvg" preserveAspectRatio="xMidYMid meet"></svg>
          </div>
          <div class="timeline-legend">
            <div class="legend-item">
              <div class="legend-bar universe-bar"></div>
              <span>Universe active</span>
            </div>
            <div class="legend-item">
              <div class="legend-marker conflict-marker"></div>
              <span>Conflict detected</span>
            </div>
          </div>
        </div>

        <div class="tabs" id="tabs">
          <button class="tab active" data-tab="universes">Universes</button>
          <button class="tab" data-tab="flows">Flows</button>
          <button class="tab" data-tab="conflicts">Conflicts</button>
          <button class="tab" data-tab="compliance">Compliance</button>
        </div>

        <div class="tab-content">
          <div class="toolbar">
            <input id="filterInput" type="text" placeholder="Filter..." />
            <div class="status" id="status">No report loaded.</div>
          </div>

          <div class="content">
            <div class="table-wrap">
              <table id="dataTable">
                <thead id="tableHead"></thead>
                <tbody id="tableBody"></tbody>
              </table>
            </div>
            <aside class="details" id="details">
              <div class="details-header">
                <div class="details-title">Details</div>
                <button id="copyJsonBtn" type="button" disabled>Copy JSON</button>
              </div>
              <div class="details-body" id="detailsBody">Select a row to view details.</div>
            </aside>
          </div>
        </div>
      </section>
    </main>

    <footer class="footer">
      LiveShark Report Viewer (v0.1.1) - local, no network, no dependencies.
    </footer>

    <script src="app.js"></script>
  </body>
</html>
